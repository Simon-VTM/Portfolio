<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>2. semester – Tæt-lavt boligområde & fælleshus</title>
  <style>
    :root{ --space:20px; --radius:16px; --border:#e6e8eb; }
    body{ font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin:0; color:#0f172a; background:#f8fafc; }
    header, main{ max-width:1000px; margin:0 auto; padding:24px; }
    a{ color:#1f2937; }
    .back{ display:inline-block; margin:8px 0 16px; text-decoration:none; }
    .hero{ border-radius:var(--radius); overflow:hidden; background:#fff; }
    .media{ aspect-ratio:16/9; background:linear-gradient(180deg,#f1f5f9,#fff); display:flex; align-items:center; justify-content:center; }
    .media img{ width:100%; height:100%; object-fit:contain; background:#fff; display:block; }
    .body{ padding:var(--space); background:#fff; }
    .meta{ color:#000; font-size:18px; font-weight:600; margin-bottom:8px; }
    h1{ margin:0 0 8px; font-size:28px; }
    .grid{ display:grid; gap:var(--space); grid-template-columns: 1fr; }
    @media(min-width:900px){ .grid{ grid-template-columns: 2fr 1fr; } }
    section{ background:#fff; padding:var(--space); border-radius:var(--radius); }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:12px; }
    .chip{ padding:6px 10px; border-radius:999px; background:#eef2f7; font-size:12px; }
    footer{ text-align:center; padding:40px 24px; color:#475569; }

    main.grid{ display:grid; gap:20px; grid-template-columns: 2fr 1fr; }
    @media (max-width:900px){ main.grid{ grid-template-columns:1fr; } }

    .card{ background:#fff; padding:var(--space); border-radius:var(--radius); }
    .full-span{ grid-column: 1 / -1; }

    /* Galleri */
    .gallery-section h2{ margin:0 0 10px; }
    .gallery-section h3{ margin:18px 0 10px; font-size:18px; }
    .gallery-grid{ display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); }
    .gallery-grid button{ 
      display:block; border:1px solid var(--border); border-radius:12px; overflow:hidden; 
      background:#fff; text-decoration:none; color:inherit; cursor:pointer; padding:0;
      transition: transform 0.2s ease;
    }
    .gallery-grid button:hover{ transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .gallery-grid img{ width:100%; aspect-ratio:4/3; object-fit:cover; display:block; transition:transform .15s; }
    .gallery-grid button:hover img{ transform:scale(1.02); }

    /* Modal */
    .modal-overlay{ 
      position:fixed; top:0; left:0; width:100vw; height:100vh; 
      background:rgba(0,0,0,0.9); z-index:1000; display:none;
      backdrop-filter: blur(10px);
    }
    .modal-overlay.active{ display:flex; align-items:center; justify-content:center; }
    
    .modal-content{ 
      position:relative; width:100vw; height:100vh; 
      display:flex; align-items:center; justify-content:center;
      touch-action: pan-x pan-y pinch-zoom;
      overflow: hidden;
    }
    
    .modal-image{ 
      max-width:100%; max-height:calc(100vh - 80px); object-fit:contain; 
      transition: transform 0.3s ease;
      transform-origin: center center;
      cursor: grab;
      margin-top: 40px;
    }
    .modal-image:active{ cursor: grabbing; }

    .modal-nav{ 
      position:absolute; top:50%; transform:translateY(-50%); z-index:15;
      background:rgba(255,255,255,0.2); border:2px solid rgba(255,255,255,0.3); border-radius:50%; 
      width:54px; height:54px; font-size:24px; cursor:pointer; color:white;
      backdrop-filter: blur(10px); transition: all 0.2s ease;
      display:flex; align-items:center; justify-content:center;
    }
    .modal-nav:hover{ background:rgba(255,255,255,0.3); transform:translateY(-50%) scale(1.1); }
    .modal-nav.prev{ left:30px; }
    .modal-nav.next{ right:30px; }
    
    .modal-close{ 
      position:absolute; top:20px; right:20px; z-index:20;
      background:rgba(255,255,255,0.2); border:2px solid rgba(255,255,255,0.3); border-radius:50%; 
      width:44px; height:44px; font-size:24px; cursor:pointer; color:white;
      backdrop-filter: blur(10px); transition: all 0.2s ease;
      display:flex; align-items:center; justify-content:center;
    }
    .modal-close:hover{ background:rgba(255,255,255,0.3); transform: scale(1.1); }

    .modal-counter{ 
      position:absolute; bottom:20px; left:50%; transform:translateX(-50%);
      background:rgba(0,0,0,0.7); color:white; padding:8px 16px; 
      border-radius:20px; font-size:14px; backdrop-filter: blur(10px);
    }

    .modal-title{ 
      position:absolute; top:0; left:0; right:0; z-index:10;
      background:linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 70%, transparent 100%); 
      color:white; padding:20px; font-size:16px; font-weight:500;
      backdrop-filter: blur(10px);
    }

    @media (max-width: 768px) {
      .modal-nav{ width:44px; height:44px; font-size:20px; }
      .modal-nav.prev{ left:15px; }
      .modal-nav.next{ right:15px; }
      .modal-title{ padding:15px; font-size:14px; }
      .modal-image{ max-height:calc(100vh - 60px); margin-top: 30px; }
    }

    /* Pager (forrige/næste) */
    .pager{
      position:sticky; bottom:0; z-index:40;
      background:rgba(248,250,252,0.85);
      backdrop-filter: blur(8px);
      border-top:1px solid var(--border);
      margin-top:24px; padding:12px 0;
    }
    .pager .inner{ max-width:1000px; margin:0 auto; padding:0 24px; display:flex; gap:12px; justify-content:space-between; align-items:center; }
    .pager a.btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border:1px solid var(--border); border-radius:12px; background:#fff; text-decoration:none;
      transition:transform .15s, box-shadow .15s;
    }
    .pager a.btn:hover{ transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.08); }
  </style>
</head>
<body>
  <header>
    <a class="back" href="projekter.html">← Tilbage til projekter</a>
    <div class="hero">
      <div class="media">
        <img src="billeder/2-semester.jpg"
                 alt="2. semester – tæt-lavt boligområde & fælleshus"
                 loading="lazy"
                 style="width:100%;height:100%;object-fit:contain;object-position:50% 50%;display:block;background:#fff;">
      </div>
      <div class="body">
        <div class="meta">2. semester • Tværfagligt projekt</div>
        <h1>Tæt-lavt boligområde & fælleshus</h1>
        <div class="chips">
          <span class="chip">Situationsplan</span><span class="chip">Bygningsdesign</span>
          <span class="chip">Bæredygtighed</span><span class="chip">Energikrav</span>
          <span class="chip">Udbudsprojekt</span>
        </div>
      </div>
    </div>
  </header>

  <main class="grid">
    <section class="card">
      <h2 style="margin-top:0;">Projektoversigt</h2>
      <p>På 2. semester blev der arbejdet med projektering af et tæt-lavt boligområde med tilhørende fælleshus. 
        Projektet omfattede tre boliger i to etager, hvoraf to skulle være sammenhængende og indrettet som handicapvenlige, 
        samt et fælleshus med kælder, stue- og 1. sal.
        Arbejdet omfattede udarbejdelse af forslagsprojekt, myndighedsprojekt i henhold til BR18 og lokalplan samt udbudsprojekt, 
        med fokus på arealudnyttelse, konstruktioner, materialevalg og bæredygtige løsninger.</p>

      <h3>Nøgleopgaver</h3>
      <ul>
        <li>Team projekt</li>
        <li>Udarbejdelse af situationsplaner med boliger, parkering og fællesfaciliteter</li>
        <li>Forslagsprojekt og myndighedsprojekt iht. BR18 og lokalplan</li>
        <li>Udbudsprojekt inkl. økonomiske overslag og tidsplan</li>
        <li>Bæredygtighedstiltag og energikrav</li>
        <li>Bygningsfysik: U-værdier, varmetabsberegning, brandkrav og egenlastberegning</li>
        <li>Modellering og dokumentation i Revit</li>
      </ul>
    </section>

    <section class="card">
      <h2 style="margin-top:0;">Fakta</h2>
      <ul>
        <li><strong>Adresse:</strong> Sønderparken, 6740 Bramming</li>
        <li><strong>Bygningstype:</strong> Tæt-lav bebyggelse og fælleshus</li>
        <li><strong>Roller/værktøjer:</strong> Revit, energiberegning, Twinmotion, LCAbyg, Sigma Entreprise</li>
      </ul>
    </section>

    <section class="card gallery-section full-span" id="galleri">
      <h2>Galleri</h2>

      <h3>Plan-tegninger</h3>
      <div class="gallery-grid">
        <button type="button" data-src="billeder/2-semester/K01-H1-E0X-N001-Beliggenhedsplan.jpg" data-title="Beliggenhedsplan">
          <img src="billeder/2-semester/K01-H1-E0X-N001-Beliggenhedsplan.jpg" alt="Beliggenhedsplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_E0X_N002 -Byggepladsplan.jpg" data-title="Byggepladsplan">
          <img src="billeder/2-semester/K01_H1_E0X_N002 -Byggepladsplan.jpg" alt="Byggepladsplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H1-EST-N001-Stueplan-målplan.jpg" data-title="Stueplan-Målplan">
          <img src="billeder/2-semester/K01-H1-EST-N001-Stueplan-målplan.jpg" alt="Stueplan-Målplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_E01_N001 - 1. sal målplan.jpg" data-title="1. sal målplan">
          <img src="billeder/2-semester/K01_H1_E01_N001 - 1. sal målplan.jpg" alt="1. sal målplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_EKL_N001 - Kælder målplan.jpg" data-title="Kælder målplan">
          <img src="billeder/2-semester/K01_H1_EKL_N001 - Kælder målplan.jpg" alt="Kælder målplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H1-EST-N009-Brandplan-stueplan.jpg" data-title="Brandplan stueplan">
          <img src="billeder/2-semester/K01-H1-EST-N009-Brandplan-stueplan.jpg" alt="Brandplan stueplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H1-E01-N006-Brandplan-1.sal.jpg" data-title="Brandplan 1.sal">
          <img src="billeder/2-semester/K01-H1-E01-N006-Brandplan-1.sal.jpg" alt="Brandplan 1.sal" loading="lazy">
        </button>
      </div>

      <h3>Facade- og Snit-tegninger</h3>
      <div class="gallery-grid">
        <button type="button" data-src="billeder/2-semester/K01-H2-E0X-N001-Facade-Ost-og-vest.jpg" data-title="Facade Øst og Vest">
          <img src="billeder/2-semester/K01-H2-E0X-N001-Facade-Ost-og-vest.jpg" alt="Facade Øst og Vest" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H2-E0X-N002-Facade-Nord-og-Syd.jpg" data-title="Facade Nord og Syd">
          <img src="billeder/2-semester/K01-H2-E0X-N002-Facade-Nord-og-Syd.jpg" alt="Facade Nord og Syd" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H3-E0X-N001-Snit-A-A.jpg" data-title="Snit A-A">
          <img src="billeder/2-semester/K01-H3-E0X-N001-Snit-A-A.jpg" alt="Snit A-A" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H3-E0X-N002-Snit-B-B.jpg" data-title="Snit B-B">
          <img src="billeder/2-semester/K01-H3-E0X-N002-Snit-B-B.jpg" alt="Snit B-B" loading="lazy">
        </button>
      </div>

      <h3>Tekniske-tegninger</h3>
      <div class="gallery-grid">
        <button type="button" data-src="billeder/2-semester/K01-H5-E01-N002-Samling-af-let-ydervæg.jpg" data-title="Detalje – Samling af let ydervæg">
          <img src="billeder/2-semester/K01-H5-E01-N002-Samling-af-let-ydervæg.jpg" alt="Detalje – Samling af let ydervæg" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H5-E01-N005-Murkrone-let.jpg" data-title="Detalje – Let murkrone">
          <img src="billeder/2-semester/K01-H5-E01-N005-Murkrone-let.jpg" alt="Detalje – Let murkrone" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H5-E01-N004-Fladttag-mod-1.sal.jpg" data-title="Detalje – Fladttag-mod-1">
          <img src="billeder/2-semester/K01-H5-E01-N004-Fladttag-mod-1.sal.jpg" alt="Detalje – Fladttag-mod-1" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H1-E0X-N003-Kloakplan.jpg" data-title="Kloakplan">
          <img src="billeder/2-semester/K01-H1-E0X-N003-Kloakplan.jpg" alt="Kloakplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01-H1-E0X-N004-Regnvandsplan.jpg" data-title="Regnvandsplan">
          <img src="billeder/2-semester/K01-H1-E0X-N004-Regnvandsplan.jpg" alt="Regnvandsplan" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_ET_N002 - Spærplan bolig - _page-0001.jpg" data-title="Spærplan Bolig">
          <img src="billeder/2-semester/K01_H1_ET_N002 - Spærplan bolig - _page-0001.jpg" alt="Spærplan Bolig" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_ET_N003 - Spærplan Fælleshus 1.jpg" data-title="Spærplan fælleshus 1">
          <img src="billeder/2-semester/K01_H1_ET_N003 - Spærplan Fælleshus 1.jpg" alt="Spærplan fælleshus 1" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_ET_N004 - Spærplan fælleshus 2.jpg" data-title="Spærplan fælleshus 2">
          <img src="billeder/2-semester/K01_H1_ET_N004 - Spærplan fælleshus 2.jpg" alt="Spærplan fælleshus 2" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_EKL_N004 -Fundament kælder.jpg" data-title="Fundamentsplan Kælder">
          <img src="billeder/2-semester/K01_H1_EKL_N004 -Fundament kælder.jpg" alt="Fundamentsplan Kælder" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_EST_N005 -Fundaments plan Fælleshus.jpg" data-title="Fundamentsplan Fælleshus">
          <img src="billeder/2-semester/K01_H1_EST_N005 -Fundaments plan Fælleshus.jpg" alt="Fundamentsplan Fælleshus" loading="lazy">
        </button>
        <button type="button" data-src="billeder/2-semester/K01_H1_EST_N006 -Fundamentsplan bolig.jpg" data-title="Fundamentsplan bolig">
          <img src="billeder/2-semester/K01_H1_EST_N006 -Fundamentsplan bolig.jpg" alt="Fundamentsplan bolig" loading="lazy">
        </button>
      </div>

      <h3>Visualiseringer</h3>
      <div class="gallery-grid">
        <button type="button" data-src="billeder/2-semester.jpg" data-title="Visualisering">
          <img src="billeder/2-semester.jpg" alt="Visualisering" loading="lazy">
        </button>
      </div>
    </section>
  </main>

  <!-- Pager: Forrige/Næste -->
  <nav class="pager" aria-label="Projektnavigation">
    <div class="inner">
      <a class="btn" href="1-semester.html" rel="prev" aria-label="Forrige projekt: 1. semester">← Forrige: 1. semester</a>
      <a class="btn" href="3-semester.html" rel="next" aria-label="Næste projekt: 3. semester">Næste: 3. semester →</a>
    </div>
  </nav>

  <!-- Modal Gallery -->
  <div class="modal-overlay" id="modalOverlay" aria-hidden="true">
    <div class="modal-content">
      <img class="modal-image" id="modalImage" src="" alt="">
      <button class="modal-nav prev" id="prevBtn" aria-label="Forrige billede">‹</button>
      <button class="modal-nav next" id="nextBtn" aria-label="Næste billede">›</button>
      <button class="modal-close" id="closeBtn" aria-label="Luk">×</button>
      <div class="modal-counter" id="modalCounter">1 / 1</div>
      <div class="modal-title" id="modalTitle">Image Title</div>
    </div>
  </div>

  <footer>© 2025 Simon Vad Møller</footer>

  <script>
    class SwipeableGallery {
      constructor() {
        this.currentIndex = 0;
        this.images = [];
        this.touchStartX = 0;
        this.touchEndX = 0;
        this.touchStartY = 0;
        this.touchEndY = 0;
        this.scale = 1;
        this.translateX = 0;
        this.translateY = 0;
        this.isDragging = false;
        this.lastPinchDistance = 0;
        
        this.modal = document.getElementById('modalOverlay');
        this.modalImage = document.getElementById('modalImage');
        this.prevBtn = document.getElementById('prevBtn');
        this.nextBtn = document.getElementById('nextBtn');
        this.closeBtn = document.getElementById('closeBtn');
        this.counter = document.getElementById('modalCounter');
        this.title = document.getElementById('modalTitle');
        
        this.initEventListeners();
      }
      
      initEventListeners() {
        // Gallery buttons - get ALL images on the page
        document.querySelectorAll('[data-src]').forEach((btn, index) => {
          btn.addEventListener('click', (e) => {
            this.openModal(index);
          });
        });
        
        // Modal controls
        this.prevBtn.addEventListener('click', () => this.showPrevious());
        this.nextBtn.addEventListener('click', () => this.showNext());
        this.closeBtn.addEventListener('click', () => this.closeModal());
        
        // Keyboard navigation (modal åben => billede-navigation, ellers side-navigation)
        document.addEventListener('keydown', (e) => {
          const modalOpen = this.modal.classList.contains('active');
          if (modalOpen) {
            switch(e.key) {
              case 'ArrowLeft': this.showPrevious(); break;
              case 'ArrowRight': this.showNext(); break;
              case 'Escape': this.closeModal(); break;
            }
          } else {
            if (e.key === 'ArrowLeft') {
              const prev = document.querySelector('.pager a[rel="prev"]');
              if (prev) window.location.href = prev.getAttribute('href');
            }
            if (e.key === 'ArrowRight') {
              const next = document.querySelector('.pager a[rel="next"]');
              if (next) window.location.href = next.getAttribute('href');
            }
          }
        });
        
        // Touch/swipe events
        this.modal.addEventListener('touchstart', (e) => {
          if (e.touches.length === 1) {
            this.touchStartX = e.touches[0].clientX;
            this.touchStartY = e.touches[0].clientY;
            this.isDragging = true;
          } else if (e.touches.length === 2) {
            this.lastPinchDistance = this.getPinchDistance(e.touches);
          }
        });
        
        this.modal.addEventListener('touchmove', (e) => {
          if (e.touches.length === 1 && this.isDragging && this.scale > 1) {
            e.preventDefault();
            const deltaX = e.touches[0].clientX - this.touchStartX;
            const deltaY = e.touches[0].clientY - this.touchStartY;
            this.translateX += deltaX;
            this.translateY += deltaY;
            this.updateImageTransform();
            this.touchStartX = e.touches[0].clientX;
            this.touchStartY = e.touches[0].clientY;
          } else if (e.touches.length === 2) {
            e.preventDefault();
            const pinchDistance = this.getPinchDistance(e.touches);
            const scaleChange = pinchDistance / this.lastPinchDistance;
            this.scale = Math.min(Math.max(this.scale * scaleChange, 0.5), 3);
            
            if (this.scale <= 1) {
              this.scale = 1;
              this.translateX = 0;
              this.translateY = 0;
            }
            
            this.updateImageTransform();
            this.lastPinchDistance = pinchDistance;
          }
        });
        
        this.modal.addEventListener('touchend', (e) => {
          if (e.touches.length === 0) {
            this.touchEndX = e.changedTouches[0].clientX;
            this.touchEndY = e.changedTouches[0].clientY;
            this.isDragging = false;
            if (this.scale === 1) {
              this.handleSwipe();
            }
          }
        });
        
        // Mouse wheel zoom
        this.modal.addEventListener('wheel', (e) => {
          e.preventDefault();
          const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
          this.scale = Math.min(Math.max(this.scale * zoomFactor, 0.5), 3);
          
          if (this.scale <= 1) {
            this.scale = 1;
            this.translateX = 0;
            this.translateY = 0;
          }
          
          this.updateImageTransform();
        });
        
        // Mouse drag (desktop)
        this.modalImage.addEventListener('mousedown', (e) => {
          if (this.scale > 1) {
            this.isDragging = true;
            this.touchStartX = e.clientX;
            this.touchStartY = e.clientY;
            e.preventDefault();
          }
        });
        
        document.addEventListener('mousemove', (e) => {
          if (this.isDragging && this.scale > 1) {
            const deltaX = e.clientX - this.touchStartX;
            const deltaY = e.clientY - this.touchStartY;
            this.translateX += deltaX;
            this.translateY += deltaY;
            this.updateImageTransform();
            this.touchStartX = e.clientX;
            this.touchStartY = e.clientY;
          }
        });
        
        document.addEventListener('mouseup', () => {
          this.isDragging = false;
        });
        
        // Double-click to reset zoom and center
        this.modalImage.addEventListener('dblclick', () => {
          this.scale = 1;
          this.translateX = 0;
          this.translateY = 0;
          this.updateImageTransform();
        });
        
        // Click outside to close (click anywhere in the dark area)
        this.modal.addEventListener('click', (e) => {
          if (e.target === this.modal || e.target.classList.contains('modal-content')) {
            this.closeModal();
          }
        });
      }
      
      openModal(clickedIndex) {
        // Get ALL images on the page (not grouped)
        this.images = Array.from(document.querySelectorAll('[data-src]'));
        this.currentIndex = clickedIndex;
        
        // Reset zoom and position
        this.scale = 1;
        this.translateX = 0;
        this.translateY = 0;
        
        this.showImage();
        this.modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        this.modal.setAttribute('aria-hidden','false');
      }
      
      closeModal() {
        this.modal.classList.remove('active');
        document.body.style.overflow = '';
        this.modal.setAttribute('aria-hidden','true');
      }
      
      showPrevious() {
        this.currentIndex = (this.currentIndex - 1 + this.images.length) % this.images.length;
        this.scale = 1;
        this.translateX = 0;
        this.translateY = 0;
        this.showImage();
      }
      
      showNext() {
        this.currentIndex = (this.currentIndex + 1) % this.images.length;
        this.scale = 1;
        this.translateX = 0;
        this.translateY = 0;
        this.showImage();
      }
      
      showImage() {
        const currentImage = this.images[this.currentIndex];
        this.modalImage.src = currentImage.dataset.src;
        this.modalImage.alt = currentImage.dataset.title || '';
        this.title.textContent = currentImage.dataset.title || '';
        this.counter.textContent = `${this.currentIndex + 1} / ${this.images.length}`;
        
        // Reset transform
        this.updateImageTransform();
        
        // Show/hide navigation buttons
        this.prevBtn.style.display = this.images.length > 1 ? 'flex' : 'none';
        this.nextBtn.style.display = this.images.length > 1 ? 'flex' : 'none';
      }
      
      updateImageTransform() {
        // Smooth transition when snapping back to center
        if (this.scale === 1 && (this.translateX !== 0 || this.translateY !== 0)) {
          this.modalImage.style.transition = 'transform 0.3s ease';
        } else {
          this.modalImage.style.transition = 'transform 0.1s ease';
        }
        this.modalImage.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`;
        if (this.scale === 1) {
          setTimeout(() => {
            this.modalImage.style.transition = 'transform 0.1s ease';
          }, 300);
        }
      }
      
      getPinchDistance(touches) {
        const dx = touches[0].clientX - touches[1].clientX;
        const dy = touches[0].clientY - touches[1].clientY;
        return Math.sqrt(dx * dx + dy * dy);
      }
      
      handleSwipe() {
        const swipeThreshold = 50;
        const swipeDistance = this.touchEndX - this.touchStartX;
        const swipeDistanceY = Math.abs(this.touchEndY - this.touchStartY);
        if (Math.abs(swipeDistance) > swipeThreshold && swipeDistanceY < 100 && this.scale === 1) {
          if (swipeDistance > 0) {
            this.showPrevious();
          } else {
            this.showNext();
          }
        }
      }
    }
    
    // Init
    document.addEventListener('DOMContentLoaded', () => {
      new SwipeableGallery();
    });
  </script>
</body>
</html>
